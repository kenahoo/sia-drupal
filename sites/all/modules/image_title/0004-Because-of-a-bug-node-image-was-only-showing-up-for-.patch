From a4458676e7a6d1e00839a3d0e02a9d6c4f01fe2c Mon Sep 17 00:00:00 2001
From: Ken Williams <kenahoo@gmail.com>
Date: Wed, 18 Jan 2012 21:16:41 -0800
Subject: [PATCH 4/4] Because of a bug, node image was only showing up for users that had
 create permissions for images.  Fixed this permission check.

---
 image_title.module |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/image_title.module b/image_title.module
index 2c5d329..6faa5e3 100644
--- a/image_title.module
+++ b/image_title.module
@@ -246,7 +246,8 @@ function image_title_theme() {
  * (save, update, delete, etc.) 
  */
 function image_title_nodeapi(&$node, $op, $teaser, $page) {
-  if ( !user_access('create image titles') || (variable_get('image_title_'. $node->type, 1) == 0) ) {    
+  if ($op != "view" && $op != "load" && !user_access('create image titles')) {
+//  || (variable_get('image_title_'. $node->type, 1) == 0) ) {    // KAW not sure what this condition is
     return; // do nothing ... 
   }
   switch ($op) {
-- 
1.7.2.5

